<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit user</title>
</head>
<style>
    h1 {
        color: blue;
    }
</style>

<body>

    <%- include("./navbar") %>
        <h1> Edit User </h1>
        <form action="/update" method="POST" enctype="multipart/form-data">
            <input type="hidden" name="profile_image_old" value ="<%= data.profile_image %>">
            <label for="_id">Object id</label><br>
            <input type="text" id="_id" name="_id" value="<%= data._id %>" readonly><br>
            <label for="name">Name</label><br>
            <input type="text" id="name" name="name" value="<%= data.name %>"><br>
            <label for="lastname">Lastname</label><br>
            <input type="text" id="lastname" name="lastname" value="<%= data.lastname %>"><br><br>
            <label for="profile_image">Profile image(choose image if you want to change)</label><br>
            <input type="file" id="profile_image" name="profile_image" onchange="loadFile(event)" ><br><br>
            <button type="submit">save</button>

        </form><br>
        <a href="/user"><button>back</button></a>

        <p><img src="../images/profiles/<%= data.profile_image %>" id="output" onerror="this.src='../images/profiles/profile_default.jpg'" width="200"></p>
</body>

</html>

<script>
    var loadFile = function (event) {
        var image = document.getElementById('output');
        image.src = URL.createObjectURL(event.target.files[0]);
    };
</script>